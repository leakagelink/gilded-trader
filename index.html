<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>CoinGoldFX - Professional Trading Platform</title>
    <meta name="description" content="Trade Crypto, Forex, and Commodities on a Professional Platform" />
    <meta name="author" content="CoinGoldFX" />
    <meta name="google-site-verification" content="KAvadqDdkRbbLVTNhAY-qZ_Cu_w2nuJsNnDjhAgXqvY" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="apple-touch-icon" href="/favicon.png" />

    <meta property="og:title" content="CoinGoldFX - Professional Trading Platform" />
    <meta property="og:description" content="Trade Crypto, Forex, and Commodities on a Professional Platform" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="CoinGoldFX" />
    <meta property="og:image" content="/og-image.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="CoinGoldFX - Trade Crypto, Forex & Commodities" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="CoinGoldFX - Professional Trading Platform" />
    <meta name="twitter:description" content="Trade Crypto, Forex, and Commodities on a Professional Platform" />
    <meta name="twitter:image" content="/og-image.png" />
  </head>

  <body>
    <script>
      (function () {
        const SUPABASE_URL = "https://jslfqoxxmilfolrwvfaa.supabase.co";
        const WORKER_URL = "https://withered-dew-e3c0.nocodegenius12.workers.dev";
        const originalFetch = window.fetch.bind(window);

        function getUrlString(input) {
          if (typeof input === "string") return input;
          if (input instanceof URL) return input.toString();
          if (input instanceof Request) return input.url;
          return "";
        }

        function shouldProxyAuthOnly(rawUrl) {
          try {
            const url = new URL(rawUrl);
            if (url.origin !== SUPABASE_URL) return false;

            const path = url.pathname;
            const isAuth = path.startsWith("/auth/v1/");
            const isExcluded =
              path.startsWith("/functions/v1/") ||
              path.startsWith("/rest/v1/") ||
              path.startsWith("/storage/v1/") ||
              path.startsWith("/realtime/v1/");

            return isAuth && !isExcluded;
          } catch {
            return false;
          }
        }

        window.fetch = function (input, init) {
          const currentUrl = getUrlString(input);

          if (shouldProxyAuthOnly(currentUrl)) {
            const proxiedUrl = currentUrl.replace(SUPABASE_URL, WORKER_URL);

            if (input instanceof Request) {
              input = new Request(proxiedUrl, input);
            } else if (input instanceof URL) {
              input = new URL(proxiedUrl);
            } else {
              input = proxiedUrl;
            }
          }

          return originalFetch(input, init);
        };
      })();
    </script>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
